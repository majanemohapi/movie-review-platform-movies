{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";// Use environment variable for TMDB API key\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TMDB_API_KEY=process.env.REACT_APP_TMDB_API_KEY;export default function Search(){const[q,setQ]=useState(\"\");const[results,setResults]=useState([]);const[error,setError]=useState(\"\");const search=async e=>{e.preventDefault();if(!q)return;try{const url=\"https://api.themoviedb.org/3/search/movie?api_key=\".concat(TMDB_API_KEY,\"&query=\").concat(encodeURIComponent(q));const res=await axios.get(url);setResults(res.data.results||[]);setError(\"\");}catch(err){console.error(err);setError(\"Failed to fetch movies. Check your API key.\");setResults([]);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search Movies\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:search,className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{value:q,onChange:e=>setQ(e.target.value),className:\"form-control\",placeholder:\"Search a movie\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"Search\"})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:results.map(m=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[m.poster_path&&/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/w342\".concat(m.poster_path),className:\"card-img-top\",alt:m.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:m.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:m.release_date}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-sm btn-primary\",to:\"/add-review?movieId=\".concat(m.id,\"&movieTitle=\").concat(encodeURIComponent(m.title)),children:\"Rate & Review\"})]})]})},m.id))})]});}","map":{"version":3,"names":["React","useState","axios","Link","jsx","_jsx","jsxs","_jsxs","TMDB_API_KEY","process","env","REACT_APP_TMDB_API_KEY","Search","q","setQ","results","setResults","error","setError","search","e","preventDefault","url","concat","encodeURIComponent","res","get","data","err","console","children","onSubmit","className","value","onChange","target","placeholder","type","map","m","poster_path","src","alt","title","release_date","to","id"],"sources":["C:/Users/BRAINTECH/Desktop/movie-review-platform-movies/frontend/src/pages/Search.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\n// Use environment variable for TMDB API key\nconst TMDB_API_KEY = process.env.REACT_APP_TMDB_API_KEY;\n\nexport default function Search() {\n  const [q, setQ] = useState(\"\");\n  const [results, setResults] = useState([]);\n  const [error, setError] = useState(\"\");\n\n  const search = async (e) => {\n    e.preventDefault();\n    if (!q) return;\n\n    try {\n      const url = `https://api.themoviedb.org/3/search/movie?api_key=${TMDB_API_KEY}&query=${encodeURIComponent(q)}`;\n      const res = await axios.get(url);\n      setResults(res.data.results || []);\n      setError(\"\");\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to fetch movies. Check your API key.\");\n      setResults([]);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Search Movies</h2>\n      <form onSubmit={search} className=\"mb-3\">\n        <div className=\"input-group\">\n          <input\n            value={q}\n            onChange={(e) => setQ(e.target.value)}\n            className=\"form-control\"\n            placeholder=\"Search a movie\"\n          />\n          <button className=\"btn btn-primary\" type=\"submit\">\n            Search\n          </button>\n        </div>\n      </form>\n\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n\n      <div className=\"row\">\n        {results.map((m) => (\n          <div className=\"col-md-4 mb-3\" key={m.id}>\n            <div className=\"card\">\n              {m.poster_path && (\n                <img\n                  src={`https://image.tmdb.org/t/p/w342${m.poster_path}`}\n                  className=\"card-img-top\"\n                  alt={m.title}\n                />\n              )}\n              <div className=\"card-body\">\n                <h5 className=\"card-title\">{m.title}</h5>\n                <p className=\"card-text\">{m.release_date}</p>\n                {/* Link to AddReview page with movieId and movieTitle */}\n                <Link\n                  className=\"btn btn-sm btn-primary\"\n                  to={`/add-review?movieId=${m.id}&movieTitle=${encodeURIComponent(\n                    m.title\n                  )}`}\n                >\n                  Rate & Review\n                </Link>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}