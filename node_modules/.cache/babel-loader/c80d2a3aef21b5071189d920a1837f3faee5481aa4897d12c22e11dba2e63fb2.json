{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddReview(){const location=useLocation();const navigate=useNavigate();// Read URL parameters\nconst params=new URLSearchParams(location.search);const movieId=params.get('movieId');const movieTitle=params.get('movieTitle');const[rating,setRating]=useState(5);const[text,setText]=useState('');const[userName,setUserName]=useState('Demo User');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();if(!movieId){setError('No movie selected.');return;}setLoading(true);setError('');try{await axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL||'http://localhost:5000',\"/api/reviews\"),{movieId,movieTitle:decodeURIComponent(movieTitle),rating:Number(rating),text,userName,userId:'demo'// Change later with login\n});// Go back to movie details\nnavigate(\"/movie/\".concat(movieId));}catch(err){setError('Failed to submit review. Is backend running?');console.error(err);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Add Review\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Movie:\"}),' ',movieId&&movieTitle?/*#__PURE__*/_jsx(\"span\",{className:\"text-primary\",children:decodeURIComponent(movieTitle)}):/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"(no movie selected)\"})]})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select\",value:rating,onChange:e=>setRating(e.target.value),required:true,children:[5,4,3,2,1].map(n=>/*#__PURE__*/_jsxs(\"option\",{value:n,children:[n,\" Star\",n>1?'s':'']},n))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Review\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:\"5\",value:text,onChange:e=>setText(e.target.value),placeholder:\"Write your thoughts...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Your Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:userName,onChange:e=>setUserName(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success btn-lg\",disabled:loading||!movieId,children:loading?'Submitting...':'Submit Review'})]})]});}","map":{"version":3,"names":["React","useState","axios","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","AddReview","location","navigate","params","URLSearchParams","search","movieId","get","movieTitle","rating","setRating","text","setText","userName","setUserName","loading","setLoading","error","setError","handleSubmit","e","preventDefault","post","concat","process","env","REACT_APP_BACKEND_URL","decodeURIComponent","Number","userId","err","console","className","children","onSubmit","value","onChange","target","required","map","n","rows","placeholder","type","disabled"],"sources":["C:/Users/BRAINTECH/Desktop/movie-review-platform-movies/frontend/src/pages/AddReview.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nexport default function AddReview() {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // Read URL parameters\n  const params = new URLSearchParams(location.search);\n  const movieId = params.get('movieId');\n  const movieTitle = params.get('movieTitle');\n\n  const [rating, setRating] = useState(5);\n  const [text, setText] = useState('');\n  const [userName, setUserName] = useState('Demo User');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!movieId) {\n      setError('No movie selected.');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      await axios.post(`${process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000'}/api/reviews`, {\n        movieId,\n        movieTitle: decodeURIComponent(movieTitle),\n        rating: Number(rating),\n        text,\n        userName,\n        userId: 'demo' // Change later with login\n      });\n\n      // Go back to movie details\n      navigate(`/movie/${movieId}`);\n    } catch (err) {\n      setError('Failed to submit review. Is backend running?');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container py-5\">\n      <h1 className=\"mb-4\">Add Review</h1>\n\n      <div className=\"card mb-4\">\n        <div className=\"card-body\">\n          <p className=\"mb-0\">\n            <strong>Movie:</strong>{' '}\n            {movieId && movieTitle ? (\n              <span className=\"text-primary\">{decodeURIComponent(movieTitle)}</span>\n            ) : (\n              <span className=\"text-danger\">(no movie selected)</span>\n            )}\n          </p>\n        </div>\n      </div>\n\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Rating</label>\n          <select\n            className=\"form-select\"\n            value={rating}\n            onChange={(e) => setRating(e.target.value)}\n            required\n          >\n            {[5, 4, 3, 2, 1].map(n => (\n              <option key={n} value={n}>{n} Star{n > 1 ? 's' : ''}</option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Review</label>\n          <textarea\n            className=\"form-control\"\n            rows=\"5\"\n            value={text}\n            onChange={(e) => setText(e.target.value)}\n            placeholder=\"Write your thoughts...\"\n            required\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Your Name</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            value={userName}\n            onChange={(e) => setUserName(e.target.value)}\n            required\n          />\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"btn btn-success btn-lg\"\n          disabled={loading || !movieId}\n        >\n          {loading ? 'Submitting...' : 'Submit Review'}\n        </button>\n      </form>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}